import*as t from"react";import e,{useState as n,useEffect as r,useCallback as o,useRef as i}from"react";import{createPortal as a}from"react-dom";var s=function(){return s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},s.apply(this,arguments)};function l(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}function c(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var u,d,f,p=function(t,e){return function(t){return"function"==typeof t}(t)?t(e):t},m=(u=0,function(){return(++u).toString()}),g=(d=void 0,function(){if(void 0===d&&"undefined"!=typeof window){var t=matchMedia("(prefers-reduced-motion: reduce)");d=!t||t.matches}return d}),v=function(t){switch(t){case"info":return"rgb(2, 136, 209)";case"success":return"rgb(56, 142, 60)";case"error":return"rgb(211, 47, 47)";case"warning":return"rgb(245, 124, 0)";default:return"#262626"}};!function(t){t[t.ADD_TOAST=0]="ADD_TOAST",t[t.UPDATE_TOAST=1]="UPDATE_TOAST",t[t.UPSERT_TOAST=2]="UPSERT_TOAST",t[t.DISMISS_TOAST=3]="DISMISS_TOAST",t[t.REMOVE_TOAST=4]="REMOVE_TOAST",t[t.START_PAUSE=5]="START_PAUSE",t[t.END_PAUSE=6]="END_PAUSE"}(f||(f={}));var h=new Map,y=function(t){if(!h.has(t)){var e=setTimeout((function(){h.delete(t),A({type:f.REMOVE_TOAST,toastId:t})}),1e3);h.set(t,e)}},b=function(t,e){switch(e.type){case f.ADD_TOAST:return s(s({},t),{toasts:l([e.toast],t.toasts,!0).slice(0,20)});case f.UPDATE_TOAST:return e.toast.id&&(i=e.toast.id,(a=h.get(i))&&clearTimeout(a)),s(s({},t),{toasts:t.toasts.map((function(t){return t.id===e.toast.id?s(s({},t),e.toast):t}))});case f.UPSERT_TOAST:var n=e.toast;return t.toasts.find((function(t){return t.id===n.id}))?b(t,{type:f.UPDATE_TOAST,toast:n}):b(t,{type:f.ADD_TOAST,toast:n});case f.DISMISS_TOAST:var r=e.toastId;return r?y(r):t.toasts.forEach((function(t){y(t.id)})),s(s({},t),{toasts:t.toasts.map((function(t){return t.id===r||void 0===r?s(s({},t),{visible:!1}):t}))});case f.REMOVE_TOAST:return void 0===e.toastId?s(s({},t),{toasts:[]}):s(s({},t),{toasts:t.toasts.filter((function(t){return t.id!==e.toastId}))});case f.START_PAUSE:return s(s({},t),{pausedAt:e.time});case f.END_PAUSE:var o=e.time-(t.pausedAt||0);return s(s({},t),{pausedAt:void 0,toasts:t.toasts.map((function(t){return s(s({},t),{pauseDuration:t.pauseDuration+o})}))})}var i,a},x=[],T={toasts:[],pausedAt:void 0},A=function(t){T=b(T,t),x.forEach((function(t){t(T)}))},E={blank:4e3,error:4e3,success:4e3,info:4e3,warning:4e3,loading:1/0,custom:4e3},S=function(t){void 0===t&&(t={});var e=n(T),o=e[0],i=e[1];r((function(){return x.push(i),function(){var t=x.indexOf(i);t>-1&&x.splice(t,1)}}),[o]);var a=o.toasts.map((function(e){var n,r;return s(s(s(s({},t),t[e.type]),e),{duration:e.duration||(null===(n=t[e.type])||void 0===n?void 0:n.duration)||(null==t?void 0:t.duration)||E[e.type],style:s(s(s({},t.style),null===(r=t[e.type])||void 0===r?void 0:r.style),e.style)})}));return s(s({},o),{toasts:a})},w=function(t){return function(e,n){var r=function(t,e,n){var r,o,i,a;return void 0===e&&(e="blank"),s(s({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0},n),{id:(null==n?void 0:n.id)||m(),theme:(null==n?void 0:n.theme)?n.theme:"light",style:s({backgroundColor:(null===(r=null==n?void 0:n.style)||void 0===r?void 0:r.backgroundColor)?null===(o=null==n?void 0:n.style)||void 0===o?void 0:o.backgroundColor:"coloured"===(null==n?void 0:n.theme)?v(e):"#fff",color:(null===(i=null==n?void 0:n.style)||void 0===i?void 0:i.color)?null===(a=null==n?void 0:n.style)||void 0===a?void 0:a.color:"coloured"===(null==n?void 0:n.theme)?"#fff":"#262626"},null==n?void 0:n.style)})}("string"==typeof e?e.trim():e,t,n);return A({type:f.UPSERT_TOAST,toast:r}),r.id}},O=function(t,e){return w("blank")(t,e)};O.success=w("success"),O.info=w("info"),O.error=w("error"),O.warning=w("warning"),O.loading=w("loading"),O.custom=w("custom"),O.dismiss=function(t){A({type:f.DISMISS_TOAST,toastId:t})},O.remove=function(t){return A({type:f.REMOVE_TOAST,toastId:t})},O.promise=function(t,e,n){var r=O.loading(e.loading,s(s({},n),null==n?void 0:n.loading));return t.then((function(t){return O.success(p(e.success,t),s(s({id:r},n),null==n?void 0:n.success)),t})).catch((function(t){O.error(p(e.error,t),s(s({id:r},n),null==n?void 0:n.error))})),t};var _=function(t,e){A({type:f.UPDATE_TOAST,toast:{id:t,height:e}})},D=function(){A({type:f.START_PAUSE,time:Date.now()})},P=function(t){var e=S(t),n=e.toasts,i=e.pausedAt;r((function(){if(!i){var t=Date.now(),e=n.map((function(e){if(e.duration!==1/0){var n=(e.duration||0)+e.pauseDuration-(t-e.createdAt);if(!(n<0))return setTimeout((function(){return O.dismiss(e.id)}),n);e.visible&&O.dismiss(e.id)}}));return function(){e.forEach((function(t){return t&&clearTimeout(t)}))}}}),[n,i]);var a=o((function(){i&&A({type:f.END_PAUSE,time:Date.now()})}),[i]),s=o((function(t,e){var r,o=e||{},i=o.reverseOrder,a=void 0!==i&&i,s=o.gutter,l=void 0===s?8:s,c=o.defaultPosition,u=n.filter((function(e){return(e.position||c)===(t.position||c)&&e.height})),d=u.findIndex((function(e){return e.id===t.id})),f=u.filter((function(t,e){return e<d&&t.visible})).length,p=(r=u.filter((function(t){return t.visible}))).slice.apply(r,a?[f+1]:[0,f]).reduce((function(t,e){return t+(e.height||0)+l}),0);return p}),[n]);return{toasts:n,handlers:{updateHeight:_,startPause:D,endPause:a,calculateOffset:s}}};let k,N,R,U={data:""},I=t=>"object"==typeof window?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||U,j=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,z=/\/\*[^]*?\*\/|  +/g,C=/\n+/g,M=(t,e)=>{let n="",r="",o="";for(let i in t){let a=t[i];"@"==i[0]?"i"==i[1]?n=i+" "+a+";":r+="f"==i[1]?M(a,i):i+"{"+M(a,"k"==i[1]?"":e)+"}":"object"==typeof a?r+=M(a,e?e.replace(/([^,])+/g,(t=>i.replace(/(^:.*)|([^,])+/g,(e=>/&/.test(e)?e.replace(/&/g,t):t?t+" "+e:e)))):i):null!=a&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=M.p?M.p(i,a):i+":"+a+";")}return n+(e&&o?e+"{"+o+"}":o)+r},F={},H=t=>{if("object"==typeof t){let e="";for(let n in t)e+=n+H(t[n]);return e}return t},V=(t,e,n,r,o)=>{let i=H(t),a=F[i]||(F[i]=(t=>{let e=0,n=11;for(;e<t.length;)n=101*n+t.charCodeAt(e++)>>>0;return"go"+n})(i));if(!F[a]){let e=i!==t?t:(t=>{let e,n,r=[{}];for(;e=j.exec(t.replace(z,""));)e[4]?r.shift():e[3]?(n=e[3].replace(C," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][e[1]]=e[2].replace(C," ").trim();return r[0]})(t);F[a]=M(o?{["@keyframes "+a]:e}:e,n?"":"."+a)}let s=n&&F.g?F.g:null;return n&&(F.g=F[a]),((t,e,n,r)=>{r?e.data=e.data.replace(r,t):-1===e.data.indexOf(t)&&(e.data=n?t+e.data:e.data+t)})(F[a],e,r,s),a},L=(t,e,n)=>t.reduce(((t,r,o)=>{let i=e[o];if(i&&i.call){let t=i(n),e=t&&t.props&&t.props.className||/^go/.test(t)&&t;i=e?"."+e:t&&"object"==typeof t?t.props?"":M(t,""):!1===t?"":t}return t+r+(null==i?"":i)}),"");function q(t){let e=this||{},n=t.call?t(e.p):t;return V(n.unshift?n.raw?L(n,[].slice.call(arguments,1),e.p):n.reduce(((t,n)=>Object.assign(t,n&&n.call?n(e.p):n)),{}):n,I(e.target),e.g,e.o,e.k)}q.bind({g:1});let B=q.bind({k:1});function Y(t,e){let n=this||{};return function(){let r=arguments;function o(i,a){let s=Object.assign({},i),l=s.className||o.className;n.p=Object.assign({theme:N&&N()},s),n.o=/ *go\d+/.test(l),s.className=q.apply(n,r)+(l?" "+l:""),e&&(s.ref=a);let c=t;return t[0]&&(c=s.as||t,delete s.as),R&&c[0]&&R(s),k(c,s)}return e?e(o):o}}var Z,$,G,J,K,Q,W,X,tt,et=Y("div")(Z||(Z=c(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n  font-size: 18px;\n"],["\n  position: relative;\n  display: flex;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n  font-size: 18px;\n"]))),nt=B($||($=c(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }"],["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }"]))),rt=Y("div")(G||(G=c(["\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  display: inline-block;\n  border-top: 3px solid #262626;\n  border-right: 3px solid transparent;\n  box-sizing: border-box;\n  animation: "," 1s linear infinite;\n"],["\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  display: inline-block;\n  border-top: 3px solid #262626;\n  border-right: 3px solid transparent;\n  box-sizing: border-box;\n  animation: "," 1s linear infinite;\n"])),nt),ot=B(J||(J=c(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"],["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),it=Y("div")(K||(K=c(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"],["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),ot),at=function(e){var n=e.toast,r=n.icon,o=n.type,i=n.theme,a=n.iconColor;return void 0!==r?"string"==typeof r?t.createElement(it,null,r):r:"blank"===o?null:t.createElement(et,null,"loading"!==o&&("error"===o?t.createElement("i",{className:"fa-solid fa-circle-exclamation",style:{color:a||("coloured"===i?"#fff":"rgb(211, 47, 47)")}}):"info"===o?t.createElement("i",{className:"fa-solid fa-circle-info",style:{color:a||("coloured"===i?"#fff":"rgb(2, 136, 209)")}}):"warning"===o?t.createElement("i",{className:"fa-solid fa-triangle-exclamation",style:{color:a||("coloured"===i?"#262626":"rgb(245, 124, 0)")}}):t.createElement("i",{className:"fa-solid fa-circle-check",style:{color:a||("coloured"===i?"#fff":"rgb(56, 142, 60)")}}))||"loading"===o&&t.createElement(rt,null))},st=function(t){return"\n0% {transform: translate3d(0,".concat(-200*t,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n")},lt=function(t){return"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*t,"%,-1px) scale(.6); opacity:0;}\n")},ct=Y("div")(Q||(Q=c(['\n  display: flex;\n  align-items: center;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 360px;\n  pointer-events: auto;\n  border-radius: 8px;\n  position: relative;\n  font-size: 14px;\n  padding: 6px 8px;\n  font-family: "Roboto", sans-serif;\n'],['\n  display: flex;\n  align-items: center;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 360px;\n  pointer-events: auto;\n  border-radius: 8px;\n  position: relative;\n  font-size: 14px;\n  padding: 6px 8px;\n  font-family: "Roboto", sans-serif;\n']))),ut=Y("div")(W||(W=c(["\n  display: flex;\n  justify-content: flex-start;\n  color: inherit;\n  margin: 4px 4px 4px 8px;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"],["\n  display: flex;\n  justify-content: flex-start;\n  color: inherit;\n  margin: 4px 4px 4px 8px;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),dt=Y("div")(X||(X=c(["\n  position: absolute;\n  bottom: 0.1%;\n  left: 0.5%;\n  right: 0.1%;\n  width: 98%;\n  height: 0.3rem;\n  background-color: transparent;\n"],["\n  position: absolute;\n  bottom: 0.1%;\n  left: 0.5%;\n  right: 0.1%;\n  width: 98%;\n  height: 0.3rem;\n  background-color: transparent;\n"]))),ft=Y("div")(tt||(tt=c(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  height: 100%;\n"],["\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  height: 100%;\n"]))),pt=e.memo((function(t){var o,a,l=t.toast,c=t.position,u=t.style,d=t.children,f=l.height?function(t,e){var n=t.includes("top")?1:-1,r=g()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[st(n),lt(n)],o=r[1];return{animation:e?"".concat(B(r[0])," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(B(o)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}}(l.position||c||"top-center",l.visible):{opacity:0},m=e.createElement(at,{toast:l}),h=e.createElement(ut,s({},l.ariaProps),p(l.message,l)),y=i(),b=n(100),x=b[0],T=b[1];r((function(){return l.duration&&(y.current=setInterval((function(){x>0&&T((function(t){return t-1}))}),l.duration/100)),function(){clearInterval(y.current)}}),[]);var A=l.progressbar&&e.createElement(dt,null,e.createElement(ft,{style:{width:"".concat(x,"%"),backgroundColor:"coloured"===l.theme?"#fff":v(l.type),borderRadius:(null===(o=l.style)||void 0===o?void 0:o.borderRadius)?null===(a=l.style)||void 0===a?void 0:a.borderRadius:"8px"}}));return e.createElement(ct,{className:l.className,style:s(s(s({},f),u),l.style)},"function"==typeof d?d({icon:m,message:h}):e.createElement(e.Fragment,null,m,h,A))}));!function(t,e,n,r){M.p=e,k=t,N=n,R=r}(t.createElement);var mt,gt=function(e){var n=e.id,r=e.className,o=e.style,i=e.onHeightUpdate,a=e.children,s=t.useCallback((function(t){if(t){var e=function(){var e=t.getBoundingClientRect().height;i(n,e)};e(),new MutationObserver(e).observe(t,{subtree:!0,childList:!0,characterData:!0})}}),[n,i]);return t.createElement("div",{ref:s,className:r,style:o},a)},vt=q(mt||(mt=c(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"],["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),ht=function(e){var n=e.reverseOrder,r=e.position,o=void 0===r?"top-center":r,i=e.toastOptions,l=e.gutter,c=e.children,u=e.containerStyle,d=e.containerClassName,f=P(i),m=f.toasts,v=f.handlers;return a(t.createElement("div",{style:s({position:"fixed",zIndex:99999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},u),className:d},m.map((function(e){var r=e.position||o,i=function(t,e){var n=t.includes("top"),r=n?{top:0}:{bottom:0},o=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return s(s({left:0,right:0,display:"flex",position:"absolute",transition:g()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(e*(n?1:-1),"px)")},r),o)}(r,v.calculateOffset(e,{reverseOrder:n,gutter:l,defaultPosition:o}));return t.createElement(gt,{id:e.id,key:e.id,onHeightUpdate:v.updateHeight,className:e.visible?vt:"",style:i},"custom"===e.type?p(e.message,e):c?c(e):t.createElement(pt,{toast:e,position:r}))}))),document.body)};export{pt as ToastBar,at as ToastIcon,ht as Toaster,O as default,p as resolveValue,O as toast,P as useToaster,S as useToasterStore};
//# sourceMappingURL=index.js.map
